# encoding: utf-8
# Backup model
# Generated by Chef

require 'date'

backupdate = ENV['BACKUP_DATE']

<%- unless @date.nil? -%>
backupdate ||= Date.today<%= ' - 1' if @date == :yesterday %>
<%- end -%>

desc = <%= @description.to_s.inspect %>

if backupdate.nil?
  name = <%= @name.to_sym.inspect %>
else
  name = backupdate.strftime(<%= (@name.to_s + '-%F').inspect %>)
  desc = backupdate.strftime(desc)
end

Backup::Model.new(name, desc) do
<%= @definition %>
end
